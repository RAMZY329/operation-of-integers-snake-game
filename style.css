* { box-sizing: border-box; }
html, body { height: 100%; width: 100%; margin: 0; padding: 0; }
body {
  margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: #0f1223; color: #e9ecf1; display: flex; flex-direction: column;
  overflow: hidden; position: fixed; width: 100vw; height: 100vh;
}
#root-theme-default {}
/* Theme variables */
:root{
  --hud-bg: #141834;
  --hud-border: #22284a;
  --panel-bg: #151a3b;
  --panel-border: #2a3264;
  --button-bg: #4c67ff;
  --button-shadow: #3346b8;
  --mobile-btn-bg: #26306b;
  --canvas-bg: #0a0d1a;
  --hud-height: 60px;
}
.theme-teal{ --hud-bg:#0f2b2b; --panel-bg:#0e2a2a; --panel-border:#1e4a4a; --button-bg:#14b8a6; --button-shadow:#0e7f73; --mobile-btn-bg:#0b6b61; --canvas-bg:#031b1a; }
.theme-coral{ --hud-bg:#3b1e1b; --panel-bg:#2f1a18; --panel-border:#532a28; --button-bg:#ff6b6b; --button-shadow:#b84444; --mobile-btn-bg:#6b2f2f; --canvas-bg:#1b0a0a; }
#hud {
  display: grid; grid-template-columns: 1fr 2fr 1fr 240px; align-items: center;
  gap: 12px; padding: 10px 12px; background: var(--hud-bg); border-bottom: 1px solid var(--hud-border);
  height: var(--hud-height); flex-shrink: 0; overflow: hidden;
}
#hud .scores { display: flex; gap: 16px; font-weight: 600; }
#problemText { text-align: center; font-weight: 700; font-size: 1.5rem; line-height:1.1; }
#timer { font-weight: 700; }
#hud .labels { margin-top: 6px; opacity: 0.75; font-size: 0.9rem; display: flex; gap: 10px; }

/* Canvas sits under the HUD and fills available width; height is set by JS to keep landscape aspect */
#gameCanvas { display: block; width: 100vw; background: var(--canvas-bg); position: absolute; left: 0; right: 0; top: var(--hud-height); margin: 0 auto; }

.overlay { position: fixed; inset: 0; background: rgba(10,12,25,0.75); display: grid; place-items: center; }
.overlay.hidden { display: none; }
.panel {
  width: min(800px, 92vw); background: #151a3b; border: 1px solid #2a3264; border-radius: 10px; padding: 20px;
  box-shadow: 0 10px 50px rgba(0,0,0,0.4);
}
.name-entry{ margin:12px 0; display:flex; gap:8px; align-items:center; }
.name-entry input{ padding:8px 10px; border-radius:6px; border:1px solid #2b3656; background: #0f1630; color: #e9ecf1; min-width:220px }
.panel h1, .panel h2 { margin: 8px 0 12px; }
.panel p { margin: 8px 0; }
.panel .mini { margin: 8px 0 12px; padding-left: 18px; }
button {
  background: var(--button-bg); color: #fff; border: none; border-radius: 8px; padding: 10px 16px; font-weight: 700;
  cursor: pointer; box-shadow: 0 3px 0 var(--button-shadow); transition: transform 0.05s ease;
}
button:active { transform: translateY(1px); }

#mobileControls {
  position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%);
  display: none; gap: 18px; z-index: 5; /* hidden by default, shown on mobile */
  user-select: none; max-width: 100%;
}
.cluster { display: inline-flex; flex-direction: column; align-items: center; gap: 8px; }
.cluster .row { display: flex; gap: 8px; }
.cluster button { min-width: 56px; min-height: 56px; padding: 10px; background: var(--mobile-btn-bg); box-shadow: none; touch-action: manipulation; font-weight: 700; }

@media (max-width: 720px) {
  :root { --hud-height: 50px; }
  #hud { grid-template-columns: 1fr; gap: 4px; padding: 5px 6px; font-size: 0.9rem; }
  #problemText { font-size: 1rem; line-height: 1; }
  #mobileControls { display: flex; bottom: 4px; }
  .themes, .labels { display: none; }
  .cluster button { min-width: 48px; min-height: 48px; padding: 8px; font-size: 1rem; }
}

@media (max-width: 480px) {
  :root { --hud-height: 44px; }
  #hud { grid-template-columns: 1fr; gap: 2px; padding: 4px 4px; font-size: 0.85rem; }
  #problemText { font-size: 0.9rem; line-height: 1; }
  #mobileControls { bottom: 3px; gap: 8px; }
  .cluster button { min-width: 44px; min-height: 44px; padding: 6px; font-size: 0.9rem; }
  .theme-btn { padding: 3px 6px; font-size: 0.7rem; margin-left: 2px; }
}

@media (max-width: 360px) {
  :root { --hud-height: 40px; }
  #hud { grid-template-columns: 1fr; gap: 1px; padding: 3px 4px; font-size: 0.8rem; }
  #problemText { font-size: 0.85rem; line-height: 1; }
  #mobileControls { bottom: 2px; }
  .cluster button { min-width: 40px; min-height: 40px; padding: 5px; font-size: 0.85rem; }
}

@media (orientation: landscape) and (max-width: 720px) {
  :root { --hud-height: 45px; }
  #hud { grid-template-columns: 1fr 1fr 1fr; gap: 4px; padding: 4px 6px; font-size: 0.8rem; }
  #problemText { font-size: 0.9rem; }
  #mobileControls {
    left: auto;
    right: 6px;
    bottom: 6px;
    transform: none;
    flex-direction: column;
    align-items: flex-end;
    gap: 6px;
  }
  .cluster { flex-direction: column; }
  .cluster .row { display: flex; flex-direction: column; gap: 6px; }
  .cluster button { min-width: 40px; min-height: 40px; padding: 5px; font-size: 0.85rem; opacity: 0.85; box-shadow: 0 2px 0 rgba(0,0,0,0.3); }
  .cluster button:active { opacity: 1; transform: translateY(1px); }
  .themes, .labels { display: none; }
}

/* Theme buttons smaller */
.theme-btn{ padding:6px 10px; margin-left:6px; font-weight:700; border-radius:6px; }
.themes { justify-self: end; }
.vis{position:absolute;left:-9999px}